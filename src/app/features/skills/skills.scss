.skills-constellation {
  width: 100vw;
  height: 90vh;
  display: flex;
  flex-direction: column;
  position: relative;
  background: linear-gradient(180deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
  color: var(--text);
  overflow: hidden;
}

/* CRT Vignette on entire constellation */
.skills-constellation::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(ellipse at center, transparent 0%, rgba(0, 0, 0, 0.25) 100%);
  pointer-events: none;
  z-index: 10;
}

.constellation-title {
  position: absolute;
  top: var(--spacing-lg);
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  font-size: 2.5rem;
  color: var(--neon-cyan);
  text-shadow: 0 0 20px var(--neon-cyan);
  margin-bottom: var(--spacing-lg);
  font-family: var(--font-display);
}

.night-sky {
  flex: 1;
  width: 100%;
  height: 100%;
  position: relative;
  background: radial-gradient(ellipse at center, #0f0f23 0%, #000000 70%);
  border-radius: 0;
  overflow: hidden;
  box-shadow: none;
}

/* Star field background */
.night-sky::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 2px;
  height: 2px;
  border-radius: 50%;
  background: white;
  pointer-events: none;
  z-index: 0;
  box-shadow: 
    5vw 3vh 0px 1px rgba(255,255,255,1),
    12vw 8vh 0px 2px rgba(255,255,255,0.9),
    20vw 5vh 0px 1px rgba(255,255,255,1),
    30vw 12vh 0px 2px rgba(255,255,255,0.8),
    40vw 7vh 0px 1px rgba(255,255,255,1),
    15vw 20vh 0px 1px rgba(255,255,255,0.9),
    25vw 18vh 0px 1px rgba(255,255,255,1),
    35vw 25vh 0px 2px rgba(255,255,255,0.9),
    10vw 30vh 0px 1px rgba(255,255,255,1),
    45vw 15vh 0px 2px rgba(255,255,255,0.8),
    5vw 40vh 0px 1px rgba(255,255,255,1),
    20vw 35vh 0px 1px rgba(255,255,255,0.9),
    30vw 40vh 0px 1px rgba(255,255,255,1),
    40vw 30vh 0px 2px rgba(255,255,255,0.9),
    15vw 45vh 0px 1px rgba(255,255,255,1),
    25vw 50vh 0px 2px rgba(255,255,255,0.9),
    35vw 45vh 0px 1px rgba(255,255,255,1),
    45vw 40vh 0px 1px rgba(255,255,255,0.8),
    10vw 55vh 0px 1px rgba(255,255,255,1),
    50vw 20vh 0px 2px rgba(255,255,255,0.9),
    60vw 10vh 0px 1px rgba(255,255,255,1),
    70vw 30vh 0px 2px rgba(255,255,255,0.9),
    80vw 20vh 0px 1px rgba(255,255,255,1),
    65vw 50vh 0px 1px rgba(255,255,255,0.9),
    75vw 40vh 0px 2px rgba(255,255,255,1),
    85vw 60vh 0px 1px rgba(255,255,255,1),
    55vw 70vh 0px 2px rgba(255,255,255,0.9),
    90vw 35vh 0px 1px rgba(255,255,255,0.8),
    95vw 55vh 0px 1px rgba(255,255,255,1),
    8vw 12vh 0px 1px rgba(255,255,255,0.9),
    18vw 22vh 0px 2px rgba(255,255,255,1),
    28vw 32vh 0px 1px rgba(255,255,255,0.9),
    38vw 42vh 0px 2px rgba(255,255,255,1),
    48vw 52vh 0px 1px rgba(255,255,255,0.9),
    58vw 62vh 0px 2px rgba(255,255,255,1),
    68vw 72vh 0px 1px rgba(255,255,255,0.9),
    78vw 82vh 0px 2px rgba(255,255,255,1),
    88vw 15vh 0px 1px rgba(255,255,255,0.9),
    92vw 25vh 0px 2px rgba(255,255,255,1),
    3vw 50vh 0px 1px rgba(255,255,255,1),
    52vw 5vh 0px 1px rgba(255,255,255,0.9),
    72vw 65vh 0px 2px rgba(255,255,255,1),
    17vw 75vh 0px 1px rgba(255,255,255,0.9),
    42vw 60vh 0px 1px rgba(255,255,255,1),
    62vw 35vh 0px 2px rgba(255,255,255,0.9),
    82vw 45vh 0px 1px rgba(255,255,255,1),
    13vw 55vh 0px 1px rgba(255,255,255,0.9),
    33vw 15vh 0px 2px rgba(255,255,255,1),
    53vw 78vh 0px 1px rgba(255,255,255,0.9);
  animation: twinkle-stars 3s ease-in-out infinite;
}

/* CRT Scanline Sweep Effect */
.night-sky::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    transparent 50%,
    rgba(0, 255, 65, 0.03) 50%
  );
  background-size: 100% 4px;
  animation: scanline 0.1s linear infinite;
  pointer-events: none;
  z-index: 2;
}

.connections {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 2;
}

.connection-line {
  stroke: var(--neon-cyan);
  stroke-width: 0.5;
  opacity: 0.6;
  animation: pulse 3s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.8; }
}

@keyframes twinkle-stars {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 1; }
}

.skill-star {
  position: absolute;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  cursor: pointer;
  z-index: 3;
  transition: transform 0.3s ease;

  &:hover {
    transform: translate(-50%, -50%) scale(1.5);
  }

  .star-glow {
    width: 100%;
    height: 100%;
    border-radius: 0;
    clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
    animation: twinkle 2s ease-in-out infinite;
  }

  .skill-percentage {
    position: absolute;
    top: -25px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.8);
    color: var(--neon-cyan);
    padding: 2px 4px;
    border-radius: 4px;
    font-size: 0.8rem;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    white-space: nowrap;
  }

  &:hover .skill-percentage {
    opacity: 1;
  }

  .skill-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 1.5em;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
  }

  &:hover .skill-icon {
    opacity: 1;
  }
}

@keyframes twinkle {
  0%, 100% { opacity: 0.7; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.2); }
}

.skill-star.frontend .star-glow {
  background: radial-gradient(circle, var(--neon-cyan) 0%, transparent 70%);
}

.skill-star.backend .star-glow {
  background: radial-gradient(circle, var(--neon-green) 0%, transparent 70%);
}

.skill-star.tools .star-glow {
  background: radial-gradient(circle, var(--neon-purple) 0%, transparent 70%);
}

.legend {
  position: absolute;
  bottom: var(--spacing-lg);
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  display: flex;
  gap: var(--spacing-md);
}

.legend-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  font-size: 1.1rem;
  color: var(--text);
}

.legend-color {
  width: 20px;
  height: 20px;
  border-radius: 50%;

  &.frontend {
    background: var(--neon-cyan);
    box-shadow: 0 0 10px var(--neon-cyan);
  }

  &.backend {
    background: var(--neon-green);
    box-shadow: 0 0 10px var(--neon-green);
  }

  &.tools {
    background: var(--neon-purple);
    box-shadow: 0 0 10px var(--neon-purple);
  }
}

@keyframes scanline {
  0% { transform: translateY(-100%); }
  100% { transform: translateY(100%); }
}