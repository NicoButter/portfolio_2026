<section class="skills-constellation">
  <h2 class="constellation-title">Skill Constellation</h2>
  <div class="night-sky">
    <div class="stars-group-2"></div>
    <div class="stars-group-3"></div>
    <div class="comet comet-1"></div>
    <div class="comet comet-2"></div>
    <div class="comet comet-3"></div>
    <div class="comet comet-4"></div>
    <div class="comet comet-5"></div>
    <svg class="connections" viewBox="0 0 100 100" preserveAspectRatio="none">
      @for (skill of skills(); track skill.name; let i = $index) {
        @for (conn of skill.connections; track conn) {
          <line
            [attr.x1]="skill.x"
            [attr.y1]="skill.y"
            [attr.x2]="skills()[conn].x"
            [attr.y2]="skills()[conn].y"
            class="connection-line"
          />
        }
      }
    </svg>
    @for (skill of skills(); track skill.name; let i = $index) {
      <div
        class="skill-star"
        [style.left.%]="skill.x"
        [style.top.%]="skill.y"
        [style.width.px]="getSize(skill)"
        [style.height.px]="getSize(skill)"
        [style.box-shadow]="getGlowStyle(skill)"
        [title]="skill.name + ': ' + skill.level + '%'"
        [class]="skill.category.toLowerCase()"
      >
        <div class="star-glow"></div>
        <div class="skill-progress-bar">
          <div class="progress-container">
            <div class="progress-fill" [style.width.%]="skill.level"></div>
            <div class="progress-text">{{ skill.level }}%</div>
          </div>
        </div>
        <img [src]="getIcon(skill)" [alt]="skill.name" class="skill-icon" (error)="onImageError($event, skill)" />
      </div>
    }
  </div>
  <div class="legend">
    <div class="legend-item">
      <span class="legend-color frontend"></span> Frontend
    </div>
    <div class="legend-item">
      <span class="legend-color backend"></span> Backend
    </div>
    <div class="legend-item">
      <span class="legend-color tools"></span> Tools
    </div>
  </div>
</section>
